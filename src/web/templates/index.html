<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synthetic Intelligence Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-blue-600">
                            <i class="fas fa-robot mr-2"></i>
                            SynthAI Platform
                        </h1>
                    </div>
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-4">
                            <a href="/" class="text-gray-900 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">Dashboard</a>
                            <a href="#agents" class="text-gray-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">AI Agents</a>
                            <a href="#projects" class="text-gray-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">Projects</a>
                            <a href="#analytics" class="text-gray-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">Analytics</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <!-- Welcome Section -->
        <div class="px-4 py-6 sm:px-0">
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Welcome to Synthetic Intelligence Platform</h2>
                    <p class="text-gray-600 mb-6">Create, manage, and deploy AI-powered projects with our comprehensive suite of intelligent agents.</p>
                    
                    <!-- Quick Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-robot text-blue-600 text-2xl mr-3"></i>
                                <div>
                                    <p class="text-sm text-blue-600">AI Agents</p>
                                    <p class="text-2xl font-bold" id="agentCount">Loading...</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-tasks text-green-600 text-2xl mr-3"></i>
                                <div>
                                    <p class="text-sm text-green-600">Active Tasks</p>
                                    <p class="text-2xl font-bold" id="taskCount">Loading...</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-project-diagram text-purple-600 text-2xl mr-3"></i>
                                <div>
                                    <p class="text-sm text-purple-600">Projects</p>
                                    <p class="text-2xl font-bold" id="projectCount">Loading...</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <div class="flex items-center">
                                <i class="fas fa-chart-line text-orange-600 text-2xl mr-3"></i>
                                <div>
                                    <p class="text-sm text-orange-600">Success Rate</p>
                                    <p class="text-2xl font-bold" id="successRate">Loading...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                        <button onclick="showContentCreator()" class="bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-lg flex items-center justify-center transition duration-200">
                            <i class="fas fa-pen-nib mr-2"></i>
                            Create Content
                        </button>
                        <button onclick="showSocialScheduler()" class="bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg flex items-center justify-center transition duration-200">
                            <i class="fas fa-share-alt mr-2"></i>
                            Schedule Post
                        </button>
                        <button onclick="showAnalytics()" class="bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-lg flex items-center justify-center transition duration-200">
                            <i class="fas fa-chart-bar mr-2"></i>
                            View Analytics
                        </button>
                        <button onclick="createNewProject()" class="bg-orange-600 hover:bg-orange-700 text-white p-4 rounded-lg flex items-center justify-center transition duration-200">
                            <i class="fas fa-plus mr-2"></i>
                            New Project
                        </button>
                    </div>

                    <!-- Content Creator Panel -->
                    <div id="contentCreatorPanel" class="hidden bg-gray-50 p-6 rounded-lg mb-6">
                        <h3 class="text-lg font-semibold mb-4">AI Content Creator</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Content Type</label>
                                <select id="contentType" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                    <option value="blog_post">Blog Post</option>
                                    <option value="social_media_post">Social Media Post</option>
                                    <option value="video_script">Video Script</option>
                                    <option value="email_newsletter">Email Newsletter</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Topic</label>
                                <input type="text" id="contentTopic" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" placeholder="Enter topic...">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Tone</label>
                                <select id="contentTone" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                                    <option value="professional">Professional</option>
                                    <option value="casual">Casual</option>
                                    <option value="enthusiastic">Enthusiastic</option>
                                    <option value="formal">Formal</option>
                                </select>
                            </div>
                            <button onclick="generateContent()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                                Generate Content
                            </button>
                        </div>
                        <div id="contentResult" class="mt-4 hidden"></div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="bg-white border border-gray-200 rounded-lg">
                        <div class="px-4 py-5 sm:px-6">
                            <h3 class="text-lg leading-6 font-medium text-gray-900">Recent Activity</h3>
                        </div>
                        <div class="border-t border-gray-200">
                            <div id="recentActivity" class="p-4">
                                <p class="text-gray-500">Loading recent activity...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load dashboard data
        async function loadDashboardData() {
            try {
                const [statusResp, tasksResp, projectsResp, agentsResp] = await Promise.all([
                    fetch('/api/system/status'),
                    fetch('/api/tasks'),
                    fetch('/api/projects'),
                    fetch('/api/agents')
                ]);

                const status = await statusResp.json();
                const tasks = await tasksResp.json();
                const projects = await projectsResp.json();
                const agents = await agentsResp.json();

                // Update quick stats
                document.getElementById('agentCount').textContent = Object.keys(agents.agents).length;
                document.getElementById('taskCount').textContent = tasks.tasks.length;
                document.getElementById('projectCount').textContent = projects.projects.length;
                document.getElementById('successRate').textContent = status.success_rate ? `${status.success_rate.toFixed(1)}%` : 'N/A';

                // Update recent activity
                updateRecentActivity(tasks.tasks);

            } catch (error) {
                console.error('Error loading dashboard data:', error);
            }
        }

        function updateRecentActivity(tasks) {
            const activityContainer = document.getElementById('recentActivity');
            const recentTasks = tasks.slice(-5).reverse();

            if (recentTasks.length === 0) {
                activityContainer.innerHTML = '<p class="text-gray-500">No recent activity</p>';
                return;
            }

            activityContainer.innerHTML = recentTasks.map(task => `
                <div class="flex items-center justify-between py-2 border-b border-gray-100">
                    <div class="flex items-center">
                        <div class="w-2 h-2 rounded-full ${getStatusColor(task.status)} mr-3"></div>
                        <div>
                            <p class="text-sm font-medium">${task.type}</p>
                            <p class="text-xs text-gray-500">${new Date(task.created_at).toLocaleString()}</p>
                        </div>
                    </div>
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusBadgeColor(task.status)}">
                        ${task.status}
                    </span>
                </div>
            `).join('');
        }

        function getStatusColor(status) {
            const colors = {
                'completed': 'bg-green-500',
                'running': 'bg-blue-500',
                'pending': 'bg-yellow-500',
                'failed': 'bg-red-500'
            };
            return colors[status] || 'bg-gray-500';
        }

        function getStatusBadgeColor(status) {
            const colors = {
                'completed': 'bg-green-100 text-green-800',
                'running': 'bg-blue-100 text-blue-800',
                'pending': 'bg-yellow-100 text-yellow-800',
                'failed': 'bg-red-100 text-red-800'
            };
            return colors[status] || 'bg-gray-100 text-gray-800';
        }

        // Content generation
        async function generateContent() {
            const contentType = document.getElementById('contentType').value;
            const topic = document.getElementById('contentTopic').value;
            const tone = document.getElementById('contentTone').value;

            if (!topic) {
                alert('Please enter a topic');
                return;
            }

            try {
                const response = await fetch('/api/content/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        content_type: contentType,
                        topic: topic,
                        parameters: {
                            tone: tone
                        }
                    })
                });

                const result = await response.json();

                if (result.status === 'success') {
                    const resultDiv = document.getElementById('contentResult');
                    resultDiv.innerHTML = `
                        <div class="bg-green-50 border border-green-200 rounded-md p-4">
                            <h4 class="font-semibold text-green-800">Content Generated Successfully!</h4>
                            <div class="mt-2 text-green-700">
                                <pre class="whitespace-pre-wrap">${JSON.stringify(result.content, null, 2)}</pre>
                            </div>
                        </div>
                    `;
                    resultDiv.classList.remove('hidden');
                } else {
                    alert('Error generating content: ' + result.message);
                }
            } catch (error) {
                console.error('Error generating content:', error);
                alert('Error generating content');
            }
        }

        // Panel visibility
        function showContentCreator() {
            document.getElementById('contentCreatorPanel').classList.toggle('hidden');
        }

        function showSocialScheduler() {
            alert('Social media scheduler will be implemented here');
        }

        function showAnalytics() {
            alert('Analytics dashboard will be implemented here');
        }

        function createNewProject() {
            alert('New project creation will be implemented here');
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadDashboardData);
        
        // Refresh data every 30 seconds
        setInterval(loadDashboardData, 30000);
    </script>
</body>
</html>
